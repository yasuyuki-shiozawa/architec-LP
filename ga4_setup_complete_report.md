# Google Analytics 4 設定完了レポート

## 📊 設定完了サマリー

**実装日**: 2026年2月2日  
**測定ID**: G-FD3K84XNBY  
**ストリームID**: 13399394526  
**対象サイト**: https://architec-2025.com/

---

## ✅ 実装完了内容

### 1. GA4トラッキングコードの実装

**実装場所**: `/index.html` の `<head>` セクション

```html
<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FD3K84XNBY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FD3K84XNBY');
</script>
```

**動作確認**: ✅ 正常に動作中
- `window.gtag` が定義されている
- `window.dataLayer` にデータが送信されている
- 測定ID `G-FD3K84XNBY` が正しく設定されている

---

### 2. コンバージョンイベントの設定

**実装場所**: `/src/App.jsx` の `handleSubmit` 関数

```javascript
const handleSubmit = (e) => {
  // Netlify Formsが自動処理するため、preventDefault()は不要
  // フォームデータはNetlifyが自動で処理します
  
  // Google Analytics 4 コンバージョンイベント送信
  if (typeof window.gtag !== 'undefined') {
    window.gtag('event', 'form_submit', {
      event_category: 'engagement',
      event_label: '無料赤外線調査フォーム送信',
      value: 1
    });
  }
};
```

**追跡されるイベント**:
- **イベント名**: `form_submit`
- **カテゴリ**: `engagement`
- **ラベル**: 無料赤外線調査フォーム送信
- **値**: 1

---

### 3. 自動収集イベント（拡張計測機能）

GA4の拡張計測機能により、以下のイベントが自動的に収集されます：

| イベント名 | 説明 |
|-----------|------|
| `page_view` | ページビュー |
| `scroll` | スクロール（90%到達時） |
| `click` | 外部リンククリック |
| `file_download` | ファイルダウンロード |
| `video_start` | 動画再生開始 |
| `video_progress` | 動画視聴進捗 |
| `video_complete` | 動画視聴完了 |

---

## 📈 GA4管理画面での確認方法

### 1. リアルタイムレポート

1. Google Analytics（https://analytics.google.com/）にログイン
2. 左側メニューから「レポート」→「リアルタイム」を選択
3. 現在のアクティブユーザー数とイベントを確認

### 2. イベントレポート

1. 左側メニューから「レポート」→「エンゲージメント」→「イベント」を選択
2. `form_submit` イベントの発生回数を確認
3. イベント詳細をクリックして、詳細データを確認

### 3. コンバージョン設定

**重要**: `form_submit` イベントをコンバージョンとして登録する必要があります。

#### 手順:

1. 左側メニューから「管理」（歯車アイコン）をクリック
2. 「プロパティ」列の「イベント」をクリック
3. `form_submit` イベントを探す（データが送信されると表示されます）
4. 右側の「コンバージョンとしてマークを付ける」トグルをオンにする

---

## 🎯 追跡可能な指標

### 基本指標

- **訪問者数**: サイトへの訪問者数
- **ページビュー数**: ページが表示された回数
- **平均セッション時間**: ユーザーがサイトに滞在した平均時間
- **直帰率**: 1ページだけ見て離脱したユーザーの割合

### コンバージョン指標

- **フォーム送信数**: `form_submit` イベントの発生回数
- **コンバージョン率**: 訪問者のうち、フォームを送信したユーザーの割合
- **コンバージョンに至るまでの経路**: ユーザーがどのページを経由してフォームに到達したか

### 行動指標

- **スクロール率**: ページをどこまでスクロールしたか
- **動画視聴率**: YouTube動画の視聴開始・完了率
- **外部リンククリック**: 電話番号などのクリック数

---

## 🔧 追加設定の推奨事項

### 1. カスタムイベントの追加

**電話番号クリック追跡**:

```javascript
// 電話番号ボタンのクリックを追跡
<a href="tel:080-5530-0033" onClick={() => {
  if (typeof window.gtag !== 'undefined') {
    window.gtag('event', 'phone_click', {
      event_category: 'engagement',
      event_label: '電話番号クリック',
      value: 1
    });
  }
}}>
```

**動画視聴開始追跡**:

```javascript
// 動画再生ボタンのクリックを追跡
<button onClick={() => {
  if (typeof window.gtag !== 'undefined') {
    window.gtag('event', 'video_button_click', {
      event_category: 'engagement',
      event_label: '動画視聴開始',
      value: 1
    });
  }
}}>
```

### 2. Google広告との連携

リスティング広告を開始する際は、GA4とGoogle広告を連携させることで、より詳細な分析が可能になります。

#### 連携手順:

1. GA4管理画面の「管理」→「プロパティ」→「Google広告のリンク」
2. 「リンク」ボタンをクリック
3. Google広告アカウントを選択して連携

### 3. Google Search Consoleとの連携

SEO効果を測定するため、Google Search Consoleとの連携も推奨します。

#### 連携手順:

1. GA4管理画面の「管理」→「プロパティ」→「Search Consoleのリンク」
2. 「リンク」ボタンをクリック
3. Search Consoleプロパティを選択して連携

---

## 📊 レポート活用例

### 週次レポート

**確認項目**:
- 訪問者数の推移
- フォーム送信数
- コンバージョン率
- 人気ページ
- 流入元（検索、直接、SNSなど）

### 月次レポート

**確認項目**:
- 月間訪問者数
- 月間コンバージョン数
- 広告効果（リスティング広告開始後）
- ユーザー属性（地域、デバイスなど）
- 行動フロー分析

### 広告効果測定（リスティング広告開始後）

**確認項目**:
- 広告経由の訪問者数
- 広告経由のコンバージョン数
- CPA（コンバージョン単価）
- ROAS（広告費用対効果）

---

## 🚨 トラブルシューティング

### データが表示されない場合

1. **リアルタイムレポートを確認**
   - 自分でサイトにアクセスして、リアルタイムレポートに表示されるか確認

2. **ブラウザの開発者ツールで確認**
   - F12キーを押して開発者ツールを開く
   - 「Network」タブで `collect` というリクエストが送信されているか確認
   - 「Console」タブでエラーが表示されていないか確認

3. **広告ブロッカーの影響**
   - 広告ブロッカーがGA4をブロックしている可能性があります
   - シークレットモードで確認してみてください

### イベントが記録されない場合

1. **コンソールでテスト**
   - ブラウザの開発者ツールのConsoleタブで以下を実行:
   ```javascript
   gtag('event', 'test_event', {
     event_category: 'test',
     event_label: 'テスト',
     value: 1
   });
   ```
   - リアルタイムレポートで `test_event` が表示されるか確認

2. **フォーム送信のテスト**
   - 実際にフォームを送信して、`form_submit` イベントが記録されるか確認
   - リアルタイムレポートで確認（数秒〜数分で表示されます）

---

## 📝 運用チェックリスト

### 毎日

- [ ] リアルタイムレポートで異常がないか確認

### 毎週

- [ ] 訪問者数の推移を確認
- [ ] コンバージョン数を確認
- [ ] 人気ページを確認

### 毎月

- [ ] 月次レポートを作成
- [ ] 前月との比較分析
- [ ] 改善施策の検討

### 広告開始後（毎日）

- [ ] 広告経由の訪問者数を確認
- [ ] 広告経由のコンバージョン数を確認
- [ ] CPAを確認
- [ ] 予算消化状況を確認

---

## 🎓 GA4学習リソース

### 公式ドキュメント

- [Google Analytics 4 ヘルプセンター](https://support.google.com/analytics/)
- [GA4 イベント測定ガイド](https://developers.google.com/analytics/devguides/collection/ga4/events)

### 推奨動画

- Google Analytics公式YouTubeチャンネル
- 「GA4 初心者向けガイド」で検索

---

## ✅ 完了確認

- [x] GA4トラッキングコード実装完了
- [x] コンバージョンイベント設定完了
- [x] 動作確認完了
- [x] GitHubにプッシュ完了
- [x] Netlifyデプロイ完了
- [ ] コンバージョン設定（GA4管理画面で設定が必要）
- [ ] Google広告との連携（広告開始時）
- [ ] Search Consoleとの連携（推奨）

---

## 📞 サポート

ご不明点がございましたら、お気軽にお問い合わせください。

**設定完了日**: 2026年2月2日  
**次回確認推奨日**: 2026年2月9日（1週間後）
